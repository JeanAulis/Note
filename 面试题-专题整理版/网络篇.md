[toc]

---

## 1. 说一下HTTP和HTTPS的区别

------

| 特性           | **HTTP**（HyperText Transfer Protocol） | **HTTPS**（HyperText Transfer Protocol Secure）              |
| -------------- | --------------------------------------- | ------------------------------------------------------------ |
| **安全性**     | **不安全**，传输的数据是明文。          | **安全**，通过 SSL/TLS 协议对数据进行加密。                  |
| **连接方式**   | 客户端与服务器之间直接建立连接。        | 在 HTTP 连接的基础上，通过 **SSL/TLS** 握手过程，在客户端和服务器之间建立加密通道。 |
| **端口号**     | 默认端口是**80**。                      | 默认端口是**443**。                                          |
| **证书**       | 不需要任何证书。                        | 需要 **SSL/TLS 数字证书**来验证服务器身份。                  |
| **性能**       | 性能开销小，传输速度快。                | 增加了 SSL/TLS 握手和数据加解密的过程，性能开销相对较大。    |
| **中间人攻击** | 容易被中间人攻击者窃取、篡改数据。      | SSL/TLS 协议能有效防止中间人攻击，保证数据的完整性和机密性。 |



## 2. 说一下udp和tcp的区别，说一下tcp的三次握手和四次挥手？为什么不是两次握手？为什么四次挥手要等待2MSL？

>   [!tip]
>
>  https基于TCP



### **UDP和TCP的区别**

UDP（用户数据报协议）和 TCP（传输控制协议）是传输层协议，主要区别如下：

UDP是无连接的，也就是无需建立连接，直接发送数据包，这样可能会导致数据丢包，重复乱序的问题，由于不需要连接，所以头部开销小，传输效率高，支持一对一，一对多，多对多，常用来做语音通话。

TCP时有连接的，通信前需要通过三次握手来建立可靠连接，减少了数据包的丢失，保证了数据的可靠性，但是头部较大，可靠性开销机制较高，只支持一对一通信，适合文件传输的情况。

1. **连接性**：
   - UDP 是无连接的，发送数据前无需建立连接，直接发送数据包。
   - TCP 是有连接的，通信前需要通过三次握手建立可靠连接。
2. **可靠性**：
   - UDP 不保证数据可靠送达，数据可能丢失、重复或乱序，无重传机制。
   - TCP 提供可靠传输，通过序列号、确认应答、重传机制、流量控制和拥塞控制确保数据准确送达。
3. **传输效率**：
   - UDP 头部开销小（8字节），传输效率高，适合实时性要求高的场景，如视频流、语音通话。
   - TCP 头部较大（20字节或更多），因可靠性机制开销较高，适合需要高可靠性的场景，如文件传输、网页浏览。
4. **传输模式**：
   - UDP 支持一对一、一对多、多对多的通信，适合广播或多播。
   - TCP 仅支持一对一通信。
5. **应用场景**：
   - UDP：DNS查询、实时音视频、在线游戏。
   - TCP：HTTP/HTTPS、FTP、SMTP（邮件传输）。

### **TCP 的三次握手**

TCP 建立连接的过程称为三次握手，目的是确保双方都准备好通信，并确认双方的发送和接收能力。过程如下：

1. **第一次握手**：客户端向服务器发送一个 SYN（同步）报文，表示请求建立连接，包含一个初始序列号（Seq=x）。
2. **第二次握手**：服务器收到 SYN 后，回复一个 SYN+ACK（同步+确认）报文，表示同意建立连接，包含自己的初始序列号（Seq=y）和对客户端序列号的确认（Ack=x+1）。
3. **第三次握手**：客户端收到服务器的 SYN+ACK 后，发送一个 ACK（确认）报文，确认服务器的序列号（Ack=y+1），连接正式建立。

#### **为什么不是两次握手？**

两次握手无法确保双方都确认了对方的发送和接收能力，可能导致连接不可靠。原因如下：

- 如果只有两次握手（客户端发 SYN，服务器回 ACK），服务器无法确认客户端是否收到自己的 ACK。
- 若客户端发送的 SYN 在网络中延迟，服务器可能认为这是一个新连接请求，而客户端早已放弃，导致“半连接”问题。
- 三次握手通过客户端的最终 ACK 确认，确保双方都明确连接已建立，避免因网络延迟导致的误连接。

### **TCP 的四次挥手**

TCP 断开连接的过程称为四次挥手，确保双方有序关闭连接。过程如下：

1. **第一次挥手**：主动关闭方（通常是客户端）发送 FIN（结束）报文，表示自己数据发送完毕，请求关闭连接。
2. **第二次挥手**：被动关闭方（通常是服务器）收到 FIN 后，发送 ACK（确认）报文，表示已收到关闭请求，但可能还有数据要发送。
3. **第三次挥手**：被动关闭方发送完数据后，发送 FIN 报文，表示自己也准备关闭连接。
4. **第四次挥手**：主动关闭方收到 FIN 后，发送 ACK 报文确认，连接正式关闭。

### **为什么四次挥手要等待 2MSL？**

在四次挥手的最后，主动关闭方发送 ACK 后会等待 2MSL（最大报文段生存时间，Maximum Segment Lifetime，通常为 2-4 分钟）。原因如下：

1. **确保 ACK 被对方收到**：
   - 如果主动关闭方的 ACK 丢失，被动关闭方会重传 FIN。等待 2MSL 确保被动关闭方收到 ACK 或重传的 FIN 得到处理，避免被动关闭方误以为连接未关闭。
2. **清除网络中的旧报文**：
   - 网络中可能存在延迟的旧报文，等待 2MSL 确保这些报文失效，避免干扰新连接（尤其是同一端口复用时）。

>  [!tip]
>
> MSL: 报文最大生存时间

2MSL 是报文在网络中的最大往返时间，等待这个时间可以最大程度保证连接的可靠关闭。

>  [!important]
>
>  