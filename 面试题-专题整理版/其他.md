[toc]

---

## 1. 说一下加解密和编解码的区别？说一下对称加密和非对称加密的区别？常用有哪些对称和非对称算法？

### 加解密和编解码的区别

- **编解码（Encode/Decode）**：是数据格式的转换，目的在于适应传输、存储或者兼容性需求。它公开透明，任何人只要知道规则，就能还原原始数据。比如 Base64、URL 编码、字符编码。**没有安全性**。
- **加解密（Encrypt/Decrypt）**：是数据安全保护，目的在于防止未授权访问。它依赖密钥，算法可以公开，但只有拥有正确密钥的人才能解密还原。比如 AES、RSA。**强调安全性**。

> [!tip]
>
> 从使用途径，使用方式来回答

------

### 对称加密和非对称加密的区别

- **对称加密**：加密和解密使用同一个密钥。速度快，适合大数据量，但密钥分发困难。
- **非对称加密**：使用公钥和私钥，公钥加密只能私钥解密，私钥加密只能公钥解密。安全性高，适合身份认证和密钥交换，但速度慢。

> [!tip]
>
> 公钥和私钥不能随便取，一般是一对的

------

### 常见的算法

- **对称加密算法**：**AES**、DES、3DES、SM4。
- **非对称加密算法**：**RSA**、ECC、DSA、SM2。



## 2. 说一下雪花算法id的组成及每个部分的作用？怎么解决时钟回拨的问题？

雪花算法（Snowflake）是一种生成分布式唯一ID的算法，它生成的ID是一个64位的整数（标准64位二进制，也有32位）。这个ID的组成结构如下：

- **1位：符号位** - 永远为0，因为ID都是正数，所以这一位不使用。
- **41位：时间戳** - 精确到毫秒，可以存储约69年的时间。这部分是ID的主体，保证了ID的递增性。
- **10位：工作机器ID** - 可以有1024个机器（节点），通常由5位数据中心ID和5位工作机器ID组成，用于区分不同的机器。
- **12位：序列号** - 同一毫秒内，在同一台机器上可以生成的ID数量，可以有4096个（0~4095）。(atomInteger原子性)

> [!tip] 
>
> 叶子算法

**作用：**

- **全局唯一性**：通过机器ID和序列号保证了在分布式系统中的唯一性。
- **递增性**：由于时间戳部分是递增的，生成的ID也是大致递增的，这对于一些数据库（如MySQL）的索引优化非常有利。
- **高可用性**：不依赖于中心化的服务，每个节点都可以独立生成ID。
- **时间有序性**：可以根据ID反向解析出其生成的大致时间。

------

**如何解决时钟回拨问题：**

时钟回拨是雪花算法面临的一个主要挑战。如果服务器时间发生了回拨，可能导致生成的ID重复。解决这个问题有几种策略：

1. ~~**直接拒绝服务**：当检测到当前时间小于上次记录的时间时，直接抛出异常并拒绝生成ID，等待时间同步。这是最简单、最安全的方法，但会导致服务暂时不可用。~~
2. ~~**等待时间追上**：当发现时钟回拨时，线程会暂停，一直等到当前时间追上或超过上次记录的时间，然后再继续生成ID。这种方法可以保证ID的唯一性，但可能会导致延迟。~~
3. ~~**使用备用序列号（高位）**：引入一个备用序列号，在时钟回拨期间，使用备用序列号来生成ID。当时间追上或超过时，再切换回正常模式。~~
4. ~~**记录上次时间并警告**：记录下上次的时间戳，如果发现回拨，可以记录警告日志，但仍然继续使用旧的时间戳生成ID。这种方式可能导致在回拨期间生成的ID时间戳看起来是错误的，但在绝大多数情况下是唯一的。~~



为什么Mysql主键要用自增的数字，不使用UUID，而是使用雪花算法生成的id呢？

// TODO